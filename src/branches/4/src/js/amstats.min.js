var amStats={extId:"65",clientId:void 0,init:function(){this.clientId=this.getPref("am_client_id");this.clientId||(this.clientId=this.uuidGenerator(),this.setPref("am_client_id",this.clientId))},check:function(a){this.clientId&&(protocol="http://",-1!=a.indexOf("https://")&&(protocol="https://"),a=a.replace("https://","").replace("http://","").split("/")[0].split("."),("com"==a[a.length-1]||"net"==a[a.length-1])&&this.checkXHR(a[a.length-2]+"."+a[a.length-1],protocol,!0))},checkXHR:function(a,b,c){var d="";c&&(d="www.");chrome.cookies.get({url:b+d+a,name:"hz_amChecked"},function(f){if(!(f&&"1"==f.value)){var e=new XMLHttpRequest;e.open("GET",b+d+a,!0);e.onreadystatechange=function(){4==e.readyState&&(0==e.status?c?amStats.checkXHR(a,b,!1):amStats.submit(a):chrome.cookies.set({url:b+d+a,name:"hz_amChecked",value:"1",expirationDate:Date.now()/1E3+86400}))};e.send(null)}})},submit:function(a){var b=new XMLHttpRequest;b.open("POST",this.apiUrl,!0);b.setRequestHeader("Content-type","application/x-www-form-urlencoded");b.send("data="+encode64(JSON.stringify({user_guid:this.clientId,extension_id:this.extId,domain:a})).replace(/=/,""))},uuidGenerator:function(){var a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},getPref:function(a){a=localStorage[a];return"false"==a?!1:a},setPref:function(a,b){localStorage[a]=b},apiUrl:"http://api.advisormedia.cz/v2/partner-domain"};window.addEventListener("load",function(){options&&options.enableStats&&amStats.init()},!1);chrome.tabs.onUpdated.addListener(function(a,b,c){options&&options.enableStats&&b.url&&(-1!=c.url.indexOf("http://")||-1!=c.url.indexOf("https://"))&&amStats.check(c.url)});var keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function encode64(a){var b="",c,d,f="",e,j,g="",h=0;do c=a.charCodeAt(h++),d=a.charCodeAt(h++),f=a.charCodeAt(h++),e=c>>2,c=(c&3)<<4|d>>4,j=(d&15)<<2|f>>6,g=f&63,isNaN(d)?j=g=64:isNaN(f)&&(g=64),b=b+keyStr.charAt(e)+keyStr.charAt(c)+keyStr.charAt(j)+keyStr.charAt(g);while(h<a.length);return b};